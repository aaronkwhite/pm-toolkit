---
// Fetch latest release version from GitHub at build time
const releaseRes = await fetch('https://api.github.com/repos/aaronkwhite/pm-toolkit/releases/latest');
const release = await releaseRes.json();
const version = release.tag_name || 'v0.5.0';

const marketplaceLinks = [
  {
    href: 'https://open-vsx.org/extension/aaronkwhite/pm-toolkit',
    label: 'Install for Cursor',
    primary: true,
  },
  {
    href: 'https://marketplace.visualstudio.com/items?itemName=aaronkwhite.pm-toolkit',
    label: 'Install for VS Code',
    primary: false,
  },
];

---

<section class="relative overflow-hidden py-20 sm:py-28 lg:py-36 gradient-mesh noise-overlay">

  <div class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="text-center max-w-3xl mx-auto mb-16">
      <!-- Badge -->
      <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-gradient-to-r from-[var(--color-primary)]/20 to-[var(--color-secondary)]/20 border border-[var(--color-primary)]/30 mb-8" style="opacity: 0; animation: fadeIn 0.5s ease-out 700ms both;">
        <svg class="w-5 h-5 text-[var(--color-primary)]" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
        </svg>
        <span class="text-sm font-semibold gradient-text">FREE FOREVER</span>
      </div>

      <!-- Headline -->
      <h1 class="text-5xl sm:text-6xl lg:text-7xl font-extrabold tracking-tighter mb-6 animate-fade-in-up" style="color: var(--text-primary);">
        Your docs.<br class="sm:hidden" />
        <span class="gradient-text">Your editor.</span>
      </h1>

      <!-- Subheadline -->
      <p class="text-xl sm:text-2xl mb-12 animate-fade-in-up delay-150" style="color: var(--text-secondary);">
        Visual markdown, kanban boards, and diagrams â€” right where you code.
      </p>

      <!-- CTAs -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-4 mb-6 animate-fade-in-up delay-300">
        {
          marketplaceLinks.map((link) => (
            <a
              href={link.href}
              target="_blank"
              rel="noopener noreferrer"
              class:list={[
                'btn gap-2',
                link.primary ? 'btn-primary' : 'btn-secondary',
              ]}
            >
              {link.label}
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
              </svg>
            </a>
          ))
        }
      </div>

      <!-- Version -->
      <p class="text-sm mb-12" style="color: var(--text-muted); opacity: 0; animation: fadeInUp 0.7s ease-out 800ms both;">
        {version}
      </p>

    </div>

    <!-- Hero Screenshot -->
    <div class="hero-screenshot relative max-w-5xl mx-auto animate-fade-in-up delay-500 rounded-[3rem]">
      <!-- Gradient background card -->
      <div class="relative z-10 rounded-[3rem] overflow-hidden">
        <img
          src="/images/gradient-background.png"
          alt=""
          class="w-full h-auto block"
          loading="eager"
        />
      </div>

      <!-- Screenshot centered on top -->
      <div class="absolute z-20 top-[6%] bottom-[6%] left-5 right-5 sm:left-8 sm:right-8 lg:left-10 lg:right-10 flex items-center justify-center animate-float">
        <div class="w-full rounded-2xl overflow-hidden">
          <img
            src="/images/pmtoolkit-visual-editor.png"
            srcset="/images/pmtoolkit-visual-editor.png 1160w, /images/pmtoolkit-visual-editor@2x.png 2320w"
            sizes="(max-width: 1024px) 100vw, 900px"
            alt="PM Toolkit visual markdown editor in Cursor"
            loading="eager"
            class="w-full block"
          />
        </div>
      </div>
    </div>
  </div>
</section>
