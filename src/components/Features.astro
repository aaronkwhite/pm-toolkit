---
const features = [
  {
    id: 'editor',
    title: 'No more preview tabs',
    description: "Type <code>/</code> for slash commands. Select text for instant formatting. Drag in images. It just works.",
    screenshot: '/images/pm-toolkit-markdown-formatting.png',
    alt: 'PM Toolkit visual markdown editor with bubble menu',
    imagePosition: 'left',
  },
  {
    id: 'kanban',
    title: 'Tasks without context switching',
    description: 'Drag cards between columns. Your board stays as plain markdown — portable, version-controlled, yours.',
    screenshot: '/images/pm-toolkit-kanban-editor.png',
    alt: 'PM Toolkit kanban board with drag and drop',
    imagePosition: 'right',
  },
  {
    id: 'viewers',
    title: 'View docs without leaving Cursor',
    description: 'PDF, Word, Excel, CSV — open them right in your editor. No more jumping to Finder.',
    screenshot: '/images/pm-toolkit-file-viewer.png',
    alt: 'PM Toolkit file viewer showing PDF',
    imagePosition: 'left',
  },
];
---

<section id="features" class="relative" style="background-color: var(--bg-secondary);">
  {
    features.map((feature, index) => (
      <div
        class:list={[
          'section relative',
          index === 0 && 'section-divider-wave',
        ]}
        style={index > 0 ? 'border-top: 1px solid var(--border-color);' : ''}
      >
        {/* Gradient accent for alternating sections */}
        {index % 2 === 1 && (
          <div class="absolute inset-0 overflow-hidden pointer-events-none">
            <div class="absolute top-1/2 -translate-y-1/2 right-0 w-[500px] h-[500px] bg-[var(--color-primary)]/5 rounded-full blur-[100px]"></div>
          </div>
        )}

        <div class="relative z-10 max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
          <div class={`flex flex-col ${feature.imagePosition === 'right' ? 'lg:flex-row-reverse' : 'lg:flex-row'} items-center gap-12 lg:gap-20`}>
            <!-- Screenshot -->
            <div
              class="flex-1 w-full scroll-animate"
              data-animation={feature.imagePosition === 'left' ? 'animate-fade-in-left' : 'animate-fade-in-right'}
            >
              <div class="relative group">
                {/* Glow effect on hover */}
                <div class="absolute -inset-4 bg-gradient-to-br from-[var(--color-primary)]/20 to-[var(--color-secondary)]/10 rounded-2xl blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>

                <img
                  src={feature.screenshot}
                  alt={feature.alt}
                  loading="lazy"
                  class="relative w-full rounded-xl shadow-lg transition-transform duration-500 group-hover:scale-[1.02]"
                  style="border: 1px solid var(--border-color);"
                />
              </div>
            </div>

            <!-- Content -->
            <div
              class="flex-1 scroll-animate"
              data-animation={feature.imagePosition === 'left' ? 'animate-fade-in-right' : 'animate-fade-in-left'}
            >
              {/* Feature badge */}
              <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-[var(--color-primary)]/10 text-[var(--color-primary)] text-sm font-medium mb-6">
                <span class="w-1.5 h-1.5 rounded-full bg-current"></span>
                {feature.id === 'editor' && 'Visual Editor'}
                {feature.id === 'kanban' && 'Task Management'}
                {feature.id === 'viewers' && 'File Viewers'}
              </div>

              <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold tracking-tight mb-6" style="color: var(--text-primary);">
                {feature.title}
              </h2>
              <p class="text-lg lg:text-xl leading-relaxed" style="color: var(--text-secondary);" set:html={feature.description} />
            </div>
          </div>
        </div>
      </div>
    ))
  }
</section>
